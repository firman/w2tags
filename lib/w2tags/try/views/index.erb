<style>
#content a{font-size:1em;
}
#tryit td{
  vertical-align:top;
}
textarea {
  border:2px inset;
  font-size:11px;
  line-height:12px;
}
textarea.in1{
  width:400px;
  height:400px;
}
textarea.in2{
  width:600px;
  height:535px;
  background-color:#EEEEEE;
}
#ifr{
  width:600px;
  height:535px;
}

</style>
<div id="content">
<a href="#" class="load2" loc="try.rb">try.rb</a> -
<a href="#" class="load2" loc="rails">rails.hot</a> -
<a href="#" class="load2" id="curr" loc="html">html.hot</a> -
<a href="#" class="load2" loc="erb_base">erb_base.hot</a> -
<a href="#" class="load2" loc="erb_rails">erb_rails.hot</a>
<table id="tryit">
<tr>
<td>
<form id="try" method="post">
<textarea wrap="off" name="input" id="code" rows="80" class="in1"><% if params[:input] %><%= params[:input] %><% else %>%xhtml
  %head
    %title Myspace
  %body
    %h1 I am the international space station
    %p  Sign my guestbook<% end %></textarea>
<input type="submit" value="Render"/><a href="/">Home</a>
</form>
<table border=1><tr>
<td><a href="#" class="load" loc="basic" >Simple Page</a><br/>
    <a href="#" class="load" loc="basic1">Basic 1</a><br/>
    <a href="#" class="load" loc="basic2">Basic 2</a><br/>
    <a href="#" class="load" loc="basic3">Basic 3</a><br/>
    <a href="#" class="load" loc="basic4">Basic 4</a>
</td>
<td><a href="#" class="load" loc="layout">Layout:</a><br/>
    <a href="#" class="load" loc="layout1">Table</a><br/>
    <a href="#" class="load" loc="layout2">Div</a>
</td>
<td><a href="#" class="load" loc="if">Block:if</a><br/>
    <a href="#" class="load" loc="each">each</a><br/>
    <a href="#" class="load" loc="each2">each2</a><br/>
</td>
<td><a href="#" class="load" loc="popup">Popup</a><br/>
    <a href="#" class="load" loc="popup2">Popup2</a>
</td>
<td><a href="#" class="load" loc="params">Params</a>
</td>
<td><a href="#" class="load" loc="combobox">Combo</a>
</td>
<td><a href="#" class="load" loc="upload">Upload</a>
</td>
</tr>
</table>
</td>
<td class="i2">
<% if @result %>
  <textarea wrap="off" class="ln- in2"><%= @result %></textarea>
<% else %>
  <iframe frameborder="0" src="/w2/html.hot.html" id="ifr"></iframe>
<% end %>
</td>
</tr>
</table>
</div>
<script type="text/javascript">
$(function(){
  $('a.load').live('click',function(){
    var loc= "/w2/"+$(this).attr('loc')+".w2erb";
    $('textarea.in1').load(loc);
    $('iframe:eq(0)').remove();
    createHilite();
  });
  $('a.load2').live('click',function(){
  	var ifr= '<iframe id="ifr" frameborder="0" src="/w2/'+$(this).attr('loc')+'.hot.html"></iframe>';
    $('td.i2').html(ifr);
  });
  function createHilite(){
    var editor = CodeMirror.fromTextArea('code', {
      parserfile: ["../js/tokenize.js", "../js/parsew2tags.js"],
      stylesheet: "/css/rubycolors.css",
      path: "../js/",
      lineNumbers: false,
      textWrapping: false,
      indentUnit: 4,
      parserConfig: {},
      height: '400px'
    });
  }
  createHilite();
});
</script>
